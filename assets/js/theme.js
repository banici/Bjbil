"use strict";var selectedCustomerBox,selectedContainer,selectedParent,isMobileView,containerContent,body=document.querySelector("body"),mainSlider=document.querySelector(".main-slider"),imageCarousel=document.querySelectorAll(".img-carousel"),partnersCarousel=document.querySelector("#partners"),testimonialsCarousel=document.querySelector("#testimonials"),topProductsCarousel=document.querySelector("#top-products-carousel"),featuredProductsCarousel=document.querySelector("#featured-products-carousel"),sidebarProductsCarousel=document.querySelector("#sidebar-products-carousel"),hotDealsCarousel=document.querySelector("#hot-deals-carousel"),owlCarouselSelector=document.querySelectorAll(".owl-carousel"),isotopeContainer=document.querySelectorAll(".isotope"),isotopeFiltrable=document.querySelectorAll("#filtrable a"),toTop=document.querySelector("#to-top"),hover=document.querySelectorAll(".thumbnail"),navigation=document.querySelector(".navigation"),superfishMenu=document.querySelector("ul.sf-menu"),priceSliderRange=document.querySelector("#slider-range"),jobbForm=document.querySelector(".ansok-form-container"),section=document.getElementById("page-section"),sticky=document.querySelector(".sticky-dack"),btn2=document.querySelector(".select-btn-2"),scrollCarSelect=document.querySelector(".car-scroll-link"),villkorBtn=document.querySelector(".villkor-btn"),villkorX=document.querySelector(".villkor-x"),dynamicSentence=document.getElementById("dynamic-sentence"),lastWordElement=document.getElementById("last-word"),mixCarmakeName=!1,mixVideoOrder=!1;function checkScreenSize(){isMobileView=window.innerWidth<=990}if(checkScreenSize(),window.addEventListener("resize",checkScreenSize),mainSlider&&document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("video1");if(e){e.muted=!0;var t=e.play();void 0!==t&&t.then(function(){console.log("✓ Video plays")}).catch(function(e){console.log("⚠ Video autoplay blocked")}),e.addEventListener("ended",function(){this.currentTime=0,this.play().catch(function(e){})})}}),mainSlider){function e(){if(console.log("Initializing slider text..."),console.log("dynamicSentence:",dynamicSentence),console.log("lastWordElement:",lastWordElement),console.log("isMobileView:",isMobileView),dynamicSentence)if(lastWordElement){dynamicSentence.offsetHeight,lastWordElement.offsetHeight,dynamicSentence.innerHTML="Fristående specialister på";var e=["BMW","MINI","TESLA","VAG"],t=0;o();var n=setInterval(function(){o()},3e3);console.log("Desktop view - word cycling started"),document.addEventListener("visibilitychange",function(){document.hidden?(clearInterval(n),console.log("Page hidden - cycling paused")):(n=setInterval(function(){o()},3e3),console.log("Page visible - cycling resumed"))})}else console.error("lastWordElement not found");else console.error("dynamicSentence element not found");function o(){lastWordElement&&(lastWordElement.textContent=e[t],t=(t+1)%e.length,console.log("Word updated to:",lastWordElement.textContent))}}document.addEventListener("DOMContentLoaded",function(){setTimeout(e,200)}),"loading"===document.readyState||setTimeout(e,200),window.addEventListener("load",function(){console.log("Window load event - running initialization again"),setTimeout(e,200)})}const elementsUnderNavigator=[".content-area",".car-brand-section"];function CustomerServiceDefault(e="customer-contact-box"){var t=document.getElementsByClassName("customer-contact-box"),n=document.getElementsByClassName("contact-container"),o=t[0].classList[1];return"customer-contact-box"!==e&&"active"===o||"active"===o?(t[0].classList.remove("active"),void n[0].classList.remove("active")):void 0}function forceContentIntoDivForMobileView(e){if(isMobileView){const t=containerContent.children[0].className;if(e.classList.contains("active")){const t=e.children[1];t&&e.removeChild(t),selectedCustomerBox.remove("active"),e.classList.remove("active")}else{e.classList.add("active");const n=document.createElement("div");n.innerHTML=containerContent.innerHTML,n.children[0].classList.remove(t),n.children[0].classList.add("customer-mobile-info"),n.children[0].style.padding="25px",n.children[0].style.fontSize="17px",e.appendChild(n)}}}document.addEventListener("DOMContentLoaded",function(){window.onscroll=function(){!function(){if(window.innerWidth>900){let e=document.getElementsByClassName("navigation-wrapper")[0];document.body.scrollTop>214||document.documentElement.scrollTop>214?(e.style.position="fixed",e.style.boxShadow="0px 7px 10px rgba(0, 0, 0, 0.48)",n.style.paddingTop="101px"):(e.style.position="relative",e.style.boxShadow="none",n.style.paddingTop="0")}else(document.body.scrollTop>50||document.documentElement.scrollTop>50)&&"closed"===o.id?(e.style.position="fixed",e.style.zIndex="10",e.style.top="0",e.style.width="100%",e.style.boxShadow="0px 7px 10px rgba(0, 0, 0, 0.48)",n.style.paddingTop="101px"):(document.body.scrollTop>165||document.documentElement.scrollTop>165)&&"open"===o.id?(e.style.position="fixed",e.style.zIndex="10",e.style.top="0",e.style.width="100%",e.style.boxShadow="0px 7px 10px rgba(0, 0, 0, 0.48)",n.style.paddingTop="103px"):(e.style.position="static",n.style.paddingTop="0")}()};let e=document.getElementsByClassName("header")[0];const t=elementsUnderNavigator.find(e=>document.querySelector(e)),n=document.querySelector(t),o=document.querySelector(".top-bar-container-mobile")}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".extend-top-bar").forEach(function(e){e.addEventListener("click",function(){var e=document.querySelectorAll(".top-bar"),t=this.querySelector(".top-bar-container-mobile"),n=this.querySelectorAll(".chevron-box i");"open"===t.id?(t.id="closed",n[0].classList.remove("fa-chevron-up"),n[0].classList.add("fa-chevron-down"),e[0].style.height="50px"):(t.id="open",n[0].classList.remove("fa-chevron-down"),n[0].classList.add("fa-chevron-up"),e[0].style.height="165px",t.style.paddingBottom="10px")})})}),document.addEventListener("click",function(e){const t=["customer-chevron","fas"];let n=e.target.classList;if(["warranty-box","faq-box","customer-contact-box"].includes(n[0])||t.includes(n[0])){switch(CustomerServiceDefault(n[0]),selectedCustomerBox&&n[0]!==selectedCustomerBox[0]&&(selectedCustomerBox.remove("active"),selectedContainer&&selectedContainer.remove("active")),t.includes(n[0])&&(n=e.target.parentElement.classList),n.add("active"),selectedCustomerBox=n,selectedParent=e.target.parentElement,n[0]){case"customer-contact-box":containerContent=document.getElementsByClassName("contact-container")[0],(selectedContainer=document.getElementsByClassName("contact-container")[0].classList).add("active");break;case"warranty-box":containerContent=document.getElementsByClassName("warranty-container")[0],(selectedContainer=document.getElementsByClassName("warranty-container")[0].classList).add("active");break;case"faq-box":containerContent=document.getElementsByClassName("faq-container")[0],(selectedContainer=document.getElementsByClassName("faq-container")[0].classList).add("active");break;case"form-box":containerContent=document.getElementsByClassName("form-container")[0],(selectedContainer=document.getElementsByClassName("form-container")[0].classList).add("active");break;default:console.error("no target was found!")}forceContentIntoDivForMobileView(e.target.parentElement)}}),document.addEventListener("DOMContentLoaded",function(){document.getElementsByClassName("customer-contact-box").length>0&&isMobileView&&CustomerServiceDefault()}),document.addEventListener("click",function(e){"nostalgi"===e.target.id?window.location.href="nostalgi-page.html":"historia"===e.target.id?window.location.href="tidslinje.html":"arbetarna"===e.target.id&&(window.location.href="om_oss.html")}),document.querySelectorAll(".faq-row").forEach(function(e){e.addEventListener("click",function(e){var t=this.closest(".faq-expandable").querySelector(".faq-info-content"),n=this.querySelector(".faq-operator i");n.classList.toggle("fa-minus"),n.classList.toggle("fa-plus"),t.classList.toggle("expanded"),t.classList.contains("expanded")?t.style.maxHeight=t.scrollHeight+"px":t.style.maxHeight="0"})}),isMobileView&&document.addEventListener("click",function(e){const t=e.target.classList[0];if("faq-row"===t||["faq-info-title","faq-operator"].includes(t)){var n=e.target.closest(".faq-expandable"),o=n.querySelector(".faq-info-content");o.classList.toggle("expanded"),o.classList.contains("expanded")?o.style.maxHeight=o.scrollHeight+"px":o.style.maxHeight="0";var i=n.querySelector(".faq-operator i");i.classList.toggle("fa-minus"),i.classList.toggle("fa-plus")}});const emailInput=document.getElementById("mail-input"),submitButton=document.getElementById("subscribe-btn");function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)&&".co"!==e.slice(-3)}emailInput&&(emailInput.addEventListener("input",function(){const e=this.value;submitButton.disabled=!validateEmail(e)}),submitButton.addEventListener("click",function(){emailInput.value="",submitButton.disabled=!0}));const galleryContainer=document.getElementById("gallery-container"),loadMoreButton=document.getElementById("load-more"),lightboxOverlay=document.getElementById("lightbox-overlay"),lightboxImage=document.getElementById("lightbox-image"),closeLightboxButton=document.getElementById("close-lightbox");let currentIndex=1;const imagesPerPage=isMobileView?9:12,totalImages=71;function displayImages(){const e=Math.min(currentIndex+imagesPerPage,71);for(let t=currentIndex;t<e;t++){const e=document.createElement("div");e.classList.add("gallery-item"),e.style.backgroundImage=`url(assets/img/preview/nostalgi/${t}.jpg)`,e.addEventListener("click",()=>openLightbox(t)),galleryContainer&&galleryContainer.appendChild(e)}currentIndex+=imagesPerPage,currentIndex>=71?(currentIndex=1,loadMoreButton&&(loadMoreButton.style.display="none")):loadMoreButton&&(loadMoreButton.style.display="block")}function openLightbox(e){lightboxImage.src=`assets/img/preview/nostalgi/${e}.jpg`,lightboxOverlay.style.display="flex",lightboxOverlay.style.overflowY="hidden",body.style.overflowY="hidden"}closeLightboxButton&&(closeLightboxButton.addEventListener("click",()=>{lightboxOverlay.style.display="none",body.style.overflowY=""}),isMobileView&&lightboxOverlay.addEventListener("click",()=>{lightboxOverlay.style.display="none",body.style.overflowY=""})),loadMoreButton&&loadMoreButton.addEventListener("click",displayImages),displayImages();let isAnimating=!1;function checkBoxes(){const e=document.querySelector(".timeline-container");if(!e)return;const t=window.innerHeight/5.8*3;for(let n=1;n<=8;n++){if(!document.querySelector(`.box-${n}`)){const t=document.createElement("div"),o=document.createElement("div");t.classList.add("timeline-box",`box-${n}`),o.classList.add("timeline-box-content");const i=document.createElement("div");i.classList.add("first-column");const l=document.createElement("div");l.classList.add("middle-column");const c=document.createElement("div");c.classList.add("middle-column-content");const s=document.createElement("p");s.classList.add("middle-column-year");const a=document.createElement("div");a.classList.add("last-column"),s.textContent="202"+n,c.appendChild(s),l.appendChild(c),o.appendChild(i),o.appendChild(l),o.appendChild(a),isMobileView?n%2!=0?(a.style.opacity=1,i.style.opacity=0):i.style.opacity=0:n%2!=0?i.style.opacity=0:a.style.opacity=0,t.appendChild(o),e.appendChild(t)}const o=document.querySelector(`.box-${n}`);o.getBoundingClientRect().top<t&&(o.classList.add("show"),o.querySelector(".middle-column").classList.add("animate"),o.querySelector(".middle-column").classList.add("delay"))}}if(loadMoreButton&&loadMoreButton.addEventListener("click",function(){isAnimating||(isAnimating=!0,this.classList.toggle("reverse"),setTimeout(()=>{isAnimating=!1},2e3))}),window.addEventListener("scroll",checkBoxes),btn2&&(isMobileView?(btn2.setAttribute("href","tel:031847529"),btn2.textContent="Ring oss"):btn2.setAttribute("href","kontakt.html")),isMobileView||document.querySelector(".car-brand-container")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".car-card"),t=document.querySelectorAll(".info-box"),n=document.querySelector(".car-brand-container");e.forEach(e=>{e.addEventListener("click",()=>{const n=e.getAttribute("data-info"),o=document.getElementById(n);t.forEach(e=>e.classList.remove("active","partial","visible")),o.classList.add("active"),o.classList.remove("partial")})}),n.addEventListener("mouseleave",()=>{e.forEach(e=>e.classList.remove("slide-down","darken")),t.forEach(e=>{e.classList.contains("active")||e.classList.remove("visible","partial")})})}),isMobileView&&document.querySelector(".car-brand-container")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".car-brand-container"),t=Array.from(document.querySelectorAll("#mobile-car"));let n=0,o=0,i=0;const l=()=>{t.forEach((e,o)=>{e.classList.remove("active","previous","next","hidden");const i=e.getAttribute("data-info"),l=document.getElementById(i);o===n?(e.classList.add("active"),l.classList.add("active")):o===(n-1+t.length)%t.length?(e.classList.add("previous"),l.classList.remove("active")):o===(n+1)%t.length?(e.classList.add("next"),l.classList.remove("active")):(e.classList.add("hidden"),l.classList.remove("active"))})};e.addEventListener("touchstart",e=>{o=e.touches[0].clientX,i=o}),e.addEventListener("touchmove",e=>{i=e.touches[0].clientX}),e.addEventListener("touchend",()=>{const e=i-o;e<-50?n=(n+1)%t.length:e>50&&(n=(n-1+t.length)%t.length),l()}),l()}),sticky&&section){function t(){const e=section.getBoundingClientRect(),t=e.top,n=e.bottom,o=e.height,i=window.innerHeight,l=o-sticky.offsetHeight;let c;c=t>200?0:n<i?l:Math.min(l,-(t-200)),sticky.style.top=`${c}px`}window.addEventListener("scroll",t),t()}scrollCarSelect&&document.querySelectorAll(".car-scroll-link").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href"),n=document.querySelector(t);if(!n)return;const o=window.scrollY,i=n.getBoundingClientRect().top+window.scrollY-100-o,l=performance.now();requestAnimationFrame(function e(t){const n=t-l,c=Math.min(n/1200,1),s=c<.5?2*c*c:1-Math.pow(-2*c+2,2)/2;window.scrollTo(0,o+i*s),n<1200&&requestAnimationFrame(e)})})}),villkorBtn&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".villkor-ruta");let t=e[0].style.display;villkorBtn.addEventListener("click",function(){t="block"===e[0].style.display?"none":"block",e.forEach(e=>{e.style.display=t})})}),villkorX&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".villkor-ruta");let t=e[0].style.display;villkorX.addEventListener("click",function(){t="block"===e[0].style.display?"none":"block",e.forEach(e=>{e.style.display=t})})});