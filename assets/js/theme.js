"use strict";var selectedCustomerBox,selectedContainer,selectedParent,isMobileView,containerContent,body=document.querySelector("body"),mainSlider=document.querySelector(".main-slider"),imageCarousel=document.querySelectorAll(".img-carousel"),partnersCarousel=document.querySelector("#partners"),testimonialsCarousel=document.querySelector("#testimonials"),topProductsCarousel=document.querySelector("#top-products-carousel"),featuredProductsCarousel=document.querySelector("#featured-products-carousel"),sidebarProductsCarousel=document.querySelector("#sidebar-products-carousel"),hotDealsCarousel=document.querySelector("#hot-deals-carousel"),owlCarouselSelector=document.querySelectorAll(".owl-carousel"),isotopeContainer=document.querySelectorAll(".isotope"),isotopeFiltrable=document.querySelectorAll("#filtrable a"),toTop=document.querySelector("#to-top"),hover=document.querySelectorAll(".thumbnail"),navigation=document.querySelector(".navigation"),superfishMenu=document.querySelector("ul.sf-menu"),priceSliderRange=document.querySelector("#slider-range"),jobbForm=document.querySelector(".ansok-form-container"),section=document.getElementById("page-section"),sticky=document.querySelector(".sticky-dack"),btn2=document.querySelector(".select-btn-2"),scrollCarSelect=document.querySelector(".car-scroll-link"),villkorBtn=document.querySelector(".villkor-btn"),villkorX=document.querySelector(".villkor-x"),mixCarmakeName=!1,mixVideoOrder=!1;function checkScreenSize(){isMobileView=window.innerWidth<=990}checkScreenSize(),window.addEventListener("resize",checkScreenSize),mainSlider&&document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("video1");if(e){e.muted=!0;var t=e.play();void 0!==t&&t.then(function(){console.log("✓ Video plays")}).catch(function(e){console.log("⚠ Video autoplay blocked")}),e.addEventListener("ended",function(){this.currentTime=0,this.play().catch(function(e){})})}}),mainSlider&&document.addEventListener("DOMContentLoaded",function(){if(isMobileView){document.getElementById("dynamic-sentence").innerHTML="Fristående specialister"}else{var e=document.getElementById("last-word");if(!e)return;var t=["BMW","MINI","TESLA","VAG"],o=0;function n(){e.textContent=t[o],o=(o+1)%t.length}n(),setInterval(function(){n()},3e3)}});const elementsUnderNavigator=[".content-area",".car-brand-section"];function CustomerServiceDefault(e="customer-contact-box"){var t=document.getElementsByClassName("customer-contact-box"),o=document.getElementsByClassName("contact-container"),n=t[0].classList[1];return"customer-contact-box"!==e&&"active"===n||"active"===n?(t[0].classList.remove("active"),void o[0].classList.remove("active")):void 0}function forceContentIntoDivForMobileView(e){if(isMobileView){const t=containerContent.children[0].className;if(e.classList.contains("active")){const t=e.children[1];t&&e.removeChild(t),selectedCustomerBox.remove("active"),e.classList.remove("active")}else{e.classList.add("active");const o=document.createElement("div");o.innerHTML=containerContent.innerHTML,o.children[0].classList.remove(t),o.children[0].classList.add("customer-mobile-info"),o.children[0].style.padding="25px",o.children[0].style.fontSize="17px",e.appendChild(o)}}}document.addEventListener("DOMContentLoaded",function(){window.onscroll=function(){!function(){if(window.innerWidth>900){let e=document.getElementsByClassName("navigation-wrapper")[0];document.body.scrollTop>214||document.documentElement.scrollTop>214?(e.style.position="fixed",e.style.boxShadow="0px 7px 10px rgba(0, 0, 0, 0.48)",o.style.paddingTop="101px"):(e.style.position="relative",e.style.boxShadow="none",o.style.paddingTop="0")}else(document.body.scrollTop>50||document.documentElement.scrollTop>50)&&"closed"===n.id?(e.style.position="fixed",e.style.zIndex="10",e.style.top="0",e.style.width="100%",e.style.boxShadow="0px 7px 10px rgba(0, 0, 0, 0.48)",o.style.paddingTop="101px"):(document.body.scrollTop>165||document.documentElement.scrollTop>165)&&"open"===n.id?(e.style.position="fixed",e.style.zIndex="10",e.style.top="0",e.style.width="100%",e.style.boxShadow="0px 7px 10px rgba(0, 0, 0, 0.48)",o.style.paddingTop="103px"):(e.style.position="static",o.style.paddingTop="0")}()};let e=document.getElementsByClassName("header")[0];const t=elementsUnderNavigator.find(e=>document.querySelector(e)),o=document.querySelector(t),n=document.querySelector(".top-bar-container-mobile")}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".extend-top-bar").forEach(function(e){e.addEventListener("click",function(){var e=document.querySelectorAll(".top-bar"),t=this.querySelector(".top-bar-container-mobile"),o=this.querySelectorAll(".chevron-box i");"open"===t.id?(t.id="closed",o[0].classList.remove("fa-chevron-up"),o[0].classList.add("fa-chevron-down"),e[0].style.height="50px"):(t.id="open",o[0].classList.remove("fa-chevron-down"),o[0].classList.add("fa-chevron-up"),e[0].style.height="165px",t.style.paddingBottom="10px")})})}),document.addEventListener("click",function(e){const t=["customer-chevron","fas"];let o=e.target.classList;if(["warranty-box","faq-box","customer-contact-box"].includes(o[0])||t.includes(o[0])){switch(CustomerServiceDefault(o[0]),selectedCustomerBox&&o[0]!==selectedCustomerBox[0]&&(selectedCustomerBox.remove("active"),selectedContainer&&selectedContainer.remove("active")),t.includes(o[0])&&(o=e.target.parentElement.classList),o.add("active"),selectedCustomerBox=o,selectedParent=e.target.parentElement,o[0]){case"customer-contact-box":containerContent=document.getElementsByClassName("contact-container")[0],(selectedContainer=document.getElementsByClassName("contact-container")[0].classList).add("active");break;case"warranty-box":containerContent=document.getElementsByClassName("warranty-container")[0],(selectedContainer=document.getElementsByClassName("warranty-container")[0].classList).add("active");break;case"faq-box":containerContent=document.getElementsByClassName("faq-container")[0],(selectedContainer=document.getElementsByClassName("faq-container")[0].classList).add("active");break;case"form-box":containerContent=document.getElementsByClassName("form-container")[0],(selectedContainer=document.getElementsByClassName("form-container")[0].classList).add("active");break;default:console.error("no target was found!")}forceContentIntoDivForMobileView(e.target.parentElement)}}),document.addEventListener("DOMContentLoaded",function(){document.getElementsByClassName("customer-contact-box").length>0&&isMobileView&&CustomerServiceDefault()}),document.addEventListener("click",function(e){"nostalgi"===e.target.id?window.location.href="nostalgi-page.html":"historia"===e.target.id?window.location.href="tidslinje.html":"arbetarna"===e.target.id&&(window.location.href="om_oss.html")}),document.querySelectorAll(".faq-row").forEach(function(e){e.addEventListener("click",function(e){var t=this.closest(".faq-expandable").querySelector(".faq-info-content"),o=this.querySelector(".faq-operator i");o.classList.toggle("fa-minus"),o.classList.toggle("fa-plus"),t.classList.toggle("expanded"),t.classList.contains("expanded")?t.style.maxHeight=t.scrollHeight+"px":t.style.maxHeight="0"})}),isMobileView&&document.addEventListener("click",function(e){const t=e.target.classList[0];if("faq-row"===t||["faq-info-title","faq-operator"].includes(t)){var o=e.target.closest(".faq-expandable"),n=o.querySelector(".faq-info-content");n.classList.toggle("expanded"),n.classList.contains("expanded")?n.style.maxHeight=n.scrollHeight+"px":n.style.maxHeight="0";var i=o.querySelector(".faq-operator i");i.classList.toggle("fa-minus"),i.classList.toggle("fa-plus")}});const emailInput=document.getElementById("mail-input"),submitButton=document.getElementById("subscribe-btn");function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)&&".co"!==e.slice(-3)}emailInput&&(emailInput.addEventListener("input",function(){const e=this.value;submitButton.disabled=!validateEmail(e)}),submitButton.addEventListener("click",function(){emailInput.value="",submitButton.disabled=!0}));const galleryContainer=document.getElementById("gallery-container"),loadMoreButton=document.getElementById("load-more"),lightboxOverlay=document.getElementById("lightbox-overlay"),lightboxImage=document.getElementById("lightbox-image"),closeLightboxButton=document.getElementById("close-lightbox");let currentIndex=1;const imagesPerPage=isMobileView?9:12,totalImages=71;function displayImages(){const e=Math.min(currentIndex+imagesPerPage,71);for(let t=currentIndex;t<e;t++){const e=document.createElement("div");e.classList.add("gallery-item"),e.style.backgroundImage=`url(assets/img/preview/nostalgi/${t}.jpg)`,e.addEventListener("click",()=>openLightbox(t)),galleryContainer&&galleryContainer.appendChild(e)}currentIndex+=imagesPerPage,currentIndex>=71?(currentIndex=1,loadMoreButton&&(loadMoreButton.style.display="none")):loadMoreButton&&(loadMoreButton.style.display="block")}function openLightbox(e){lightboxImage.src=`assets/img/preview/nostalgi/${e}.jpg`,lightboxOverlay.style.display="flex",lightboxOverlay.style.overflowY="hidden",body.style.overflowY="hidden"}closeLightboxButton&&(closeLightboxButton.addEventListener("click",()=>{lightboxOverlay.style.display="none",body.style.overflowY=""}),isMobileView&&lightboxOverlay.addEventListener("click",()=>{lightboxOverlay.style.display="none",body.style.overflowY=""})),loadMoreButton&&loadMoreButton.addEventListener("click",displayImages),displayImages();let isAnimating=!1;function checkBoxes(){const e=document.querySelector(".timeline-container");if(!e)return;const t=window.innerHeight/5.8*3;for(let o=1;o<=8;o++){if(!document.querySelector(`.box-${o}`)){const t=document.createElement("div"),n=document.createElement("div");t.classList.add("timeline-box",`box-${o}`),n.classList.add("timeline-box-content");const i=document.createElement("div");i.classList.add("first-column");const l=document.createElement("div");l.classList.add("middle-column");const c=document.createElement("div");c.classList.add("middle-column-content");const s=document.createElement("p");s.classList.add("middle-column-year");const a=document.createElement("div");a.classList.add("last-column"),s.textContent="202"+o,c.appendChild(s),l.appendChild(c),n.appendChild(i),n.appendChild(l),n.appendChild(a),isMobileView?o%2!=0?(a.style.opacity=1,i.style.opacity=0):i.style.opacity=0:o%2!=0?i.style.opacity=0:a.style.opacity=0,t.appendChild(n),e.appendChild(t)}const n=document.querySelector(`.box-${o}`);n.getBoundingClientRect().top<t&&(n.classList.add("show"),n.querySelector(".middle-column").classList.add("animate"),n.querySelector(".middle-column").classList.add("delay"))}}if(loadMoreButton&&loadMoreButton.addEventListener("click",function(){isAnimating||(isAnimating=!0,this.classList.toggle("reverse"),setTimeout(()=>{isAnimating=!1},2e3))}),window.addEventListener("scroll",checkBoxes),btn2&&(isMobileView?(btn2.setAttribute("href","tel:031847529"),btn2.textContent="Ring oss"):btn2.setAttribute("href","kontakt.html")),isMobileView||document.querySelector(".car-brand-container")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".car-card"),t=document.querySelectorAll(".info-box"),o=document.querySelector(".car-brand-container");e.forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-info"),n=document.getElementById(o);t.forEach(e=>e.classList.remove("active","partial","visible")),n.classList.add("active"),n.classList.remove("partial")})}),o.addEventListener("mouseleave",()=>{e.forEach(e=>e.classList.remove("slide-down","darken")),t.forEach(e=>{e.classList.contains("active")||e.classList.remove("visible","partial")})})}),isMobileView&&document.querySelector(".car-brand-container")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".car-brand-container"),t=Array.from(document.querySelectorAll("#mobile-car"));let o=0,n=0,i=0;const l=()=>{t.forEach((e,n)=>{e.classList.remove("active","previous","next","hidden");const i=e.getAttribute("data-info"),l=document.getElementById(i);n===o?(e.classList.add("active"),l.classList.add("active")):n===(o-1+t.length)%t.length?(e.classList.add("previous"),l.classList.remove("active")):n===(o+1)%t.length?(e.classList.add("next"),l.classList.remove("active")):(e.classList.add("hidden"),l.classList.remove("active"))})};e.addEventListener("touchstart",e=>{n=e.touches[0].clientX,i=n}),e.addEventListener("touchmove",e=>{i=e.touches[0].clientX}),e.addEventListener("touchend",()=>{const e=i-n;e<-50?o=(o+1)%t.length:e>50&&(o=(o-1+t.length)%t.length),l()}),l()}),sticky&&section){function e(){const e=section.getBoundingClientRect(),t=e.top,o=e.bottom,n=e.height,i=window.innerHeight,l=n-sticky.offsetHeight;let c;c=t>200?0:o<i?l:Math.min(l,-(t-200)),sticky.style.top=`${c}px`}window.addEventListener("scroll",e),e()}scrollCarSelect&&document.querySelectorAll(".car-scroll-link").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href"),o=document.querySelector(t);if(!o)return;const n=window.scrollY,i=o.getBoundingClientRect().top+window.scrollY-100-n,l=performance.now();requestAnimationFrame(function e(t){const o=t-l,c=Math.min(o/1200,1),s=c<.5?2*c*c:1-Math.pow(-2*c+2,2)/2;window.scrollTo(0,n+i*s),o<1200&&requestAnimationFrame(e)})})}),villkorBtn&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".villkor-ruta");let t=e[0].style.display;villkorBtn.addEventListener("click",function(){t="block"===e[0].style.display?"none":"block",e.forEach(e=>{e.style.display=t})})}),villkorX&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".villkor-ruta");let t=e[0].style.display;villkorX.addEventListener("click",function(){t="block"===e[0].style.display?"none":"block",e.forEach(e=>{e.style.display=t})})});